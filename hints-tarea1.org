#+title: Hints Tarea1

* Problema 5
** Definciones
*** Funciones base
Primero recordamos la definicion de las tres funciones:
#+begin_src python
withdraw(amount):
  self.balance -= amount

deposit(amount):
  self.balance += amount

trasnfer(src, dst, amount):
  if src.balance >= amount: # 1
    src.withdraw(amount)    # 2
    dst.deposit(amount)     # 3
#+end_src

*** Implementacion de bajo nivel de withdraw / deposit
La funcion ~withdraw~ y "~deposit~" en realidad se descomponen en tres pasos:
#+begin_src python
withdraw(amount):
  tmp = self.balance # A: load from memory and store in register
  tmp = tmp - amount # perform operation in the ALU using registers
  self.balance = tmp # B: store the result of the computation into memory

deposit(amount):
  tmp = self.balance # C: load from memory and store in register
  tmp = tmp + amount # perform operation in the ALU using registers
  self.balance = tmp # D: store the result of the computation into memory
#+end_src

*** La condion de carrera quedaria de esta manera
#+attr_html: :alt  :align center :class img
[[img:./assets/problema5-race-condition.jpg][Ejemplo dinero de mas]]
